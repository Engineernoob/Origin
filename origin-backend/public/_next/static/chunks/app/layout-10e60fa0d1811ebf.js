(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{361:()=>{},881:(e,r,t)=>{"use strict";t.d(r,{Providers:()=>a});var o=t(5155);t(2115);var n=t(6671),s=t(1081);function a(e){let{children:r}=e;return(0,o.jsxs)(s.O,{children:[r,(0,o.jsx)(n.l$,{position:"top-right",richColors:!0})]})}},1081:(e,r,t)=>{"use strict";t.d(r,{A:()=>u,O:()=>c});var o,n=t(5155),s=t(2115),a=t(9509);let l=(0,s.createContext)(void 0),i="https://origin-backend-misty-shape-4040.fly.dev".replace(/\/$/,"")||(null==(o=a.env.NEXT_PUBLIC_BACKEND_URL)?void 0:o.replace(/\/$/,""))||"http://localhost:8080";function c(e){let{children:r}=e,[t,o]=(0,s.useState)(null),[a,c]=(0,s.useState)(null),[u,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(c(e),d(e)):h(!1)},[]);let d=async e=>{try{let r=await fetch("".concat(i,"/auth/me"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(r.ok){let e=await r.json();if(e.error)throw Error(e.error);o(e)}else m()}catch(e){console.error("Failed to fetch current user:",e),m()}finally{h(!1)}},m=()=>{localStorage.removeItem("auth_token"),c(null),o(null),h(!1)},f=async()=>{a&&await d(a)};return(0,n.jsx)(l.Provider,{value:{user:t,token:a,isLoading:u,login:e=>{localStorage.setItem("auth_token",e),c(e),h(!0),d(e)},logout:m,refreshUser:f},children:r})}function u(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4204:(e,r,t)=>{"use strict";t.d(r,{ErrorBoundary:()=>s});var o=t(5155),n=t(2115);class s extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r)}render(){return this.state.hasError?this.props.fallback||(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,o.jsxs)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6 text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.664-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,o.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Something went wrong"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"We encountered an unexpected error. Please try refreshing the page."}),(0,o.jsx)("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Refresh Page"})]})}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}},8751:(e,r,t)=>{Promise.resolve().then(t.bind(t,4204)),Promise.resolve().then(t.bind(t,881)),Promise.resolve().then(t.t.bind(t,361,23))}},e=>{e.O(0,[816,671,441,964,358],()=>e(e.s=8751)),_N_E=e.O()}]);